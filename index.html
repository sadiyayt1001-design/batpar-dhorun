<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡¶¨‡¶æ‡¶ü‡¶™‡¶æ‡¶∞ ‡¶ß‡¶∞‡ßÅ‡¶®</title>
<style>
body{margin:0;padding:0;font-family:sans-serif;background:#e8f5e9;color:#212121;}
.container{max-width:500px;margin:auto;padding:15px;}
h1,h2{text-align:center;}
input,textarea{width:100%;padding:12px;margin:5px 0;border-radius:10px;border:1px solid #ccc;font-size:16px;}
button{padding:12px;margin:5px 0;width:100%;border:none;border-radius:10px;color:#fff;font-weight:bold;cursor:pointer;font-size:16px;}
.btn-red{background:#f44336;}
.btn-green{background:#4caf50;}
.link{text-align:center;color:#2e7d32;cursor:pointer;margin-top:5px;font-size:14px;}
.card{background:#fff;padding:15px;border-radius:12px;margin-bottom:15px;box-shadow:0 2px 10px rgba(0,0,0,0.2);}
.postCard{border:1px solid #ccc;padding:15px;margin-top:10px;border-radius:12px;position:relative;}
.postCard img.postLogo{position:absolute;top:10px;left:10px;width:40px;height:40px;border-radius:50%;}
.postImages img{width:100%;margin:5px 0;border-radius:12px;}
.actions{display:flex;justify-content:space-between;flex-wrap:wrap;margin-top:10px;}
.actions button{flex:1 1 48%;margin:3px 0;}
.commentDiv{border-top:1px dotted #aaa;padding:5px;margin:3px 0;}
</style>
</head>
<body>

<!-- Login -->
<div class="container" id="loginSection">
  <h1>‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</h1>
  <input type="text" id="loginMobile" placeholder="‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞">
  <input type="password" id="loginPass" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°">
  <button class="btn-red" onclick="loginUser()">‡¶≤‡¶ó‡¶á‡¶®</button>
  <p class="link" onclick="showRegister()">‡¶Ü‡¶á‡¶°‡¶ø ‡¶§‡ßà‡¶∞‡ßÄ ‡¶ï‡¶∞‡ßÅ‡¶®</p>
  <p class="link">‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶≠‡ßÅ‡¶≤‡ßá ‡¶ó‡ßá‡¶õ‡ßá‡¶®? Admin: 01830090583</p>
</div>

<!-- Register -->
<div class="container" id="registerSection" style="display:none;">
  <h1>‡¶Ü‡¶á‡¶°‡¶ø ‡¶§‡ßà‡¶∞‡ßÄ ‡¶ï‡¶∞‡ßÅ‡¶®</h1>
  <input type="text" id="regName" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ">
  <input type="text" id="regMobile" placeholder="‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞">
  <input type="text" id="regAddress" placeholder="‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ">
  <input type="password" id="regPass" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°">
  <button class="btn-green" onclick="registerUser()">‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
  <p class="link" onclick="showLogin()">‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</p>
</div>

<!-- Home -->
<div class="container" id="homeSection" style="display:none;">
  <h1>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶™‡ßç‡¶∞‡¶§‡¶æ‡¶∞‡¶£‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá?</h1>

  <!-- Search -->
  <div class="card">
    <h2>‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡¶ø‡ßü‡ßá ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
    <input type="text" id="searchMobile" placeholder="‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞">
    <button class="btn-green" onclick="searchComplaints()">‡¶∏‡¶æ‡¶∞‡ßç‡¶ö</button>
    <div id="searchResults"></div>
  </div>

  <!-- Submit Complaint -->
  <div class="card">
    <h2>‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®</h2>
    <input type="text" id="cName" placeholder="‡¶®‡¶æ‡¶Æ">
    <input type="text" id="cMobile" placeholder="‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞">
    <input type="text" id="cAddress" placeholder="‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ">
    <input type="text" id="cFraud" placeholder="‡¶™‡ßç‡¶∞‡¶§‡¶æ‡¶∞‡¶£‡¶æ‡¶∞ ‡¶ß‡¶∞‡¶®">
    <input type="text" id="cAmount" placeholder="‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£">
    <textarea id="cDesc" placeholder="‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®"></textarea>
    <input type="text" id="cFacebook" placeholder="Facebook ID">
    <input type="text" id="cWhatsApp" placeholder="WhatsApp Number">
    <input type="file" id="cImages" multiple accept="image/*">
    <button class="btn-green" onclick="submitComplaint()">‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
  </div>

  <!-- Approved Complaints -->
  <div class="card">
    <h2>‡¶¨‡¶æ‡¶ü‡¶™‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</h2>
    <div id="posts"></div>
  </div>

  <button class="btn-red" onclick="showAdminLogin()">Admin Login</button>
</div>

<!-- Admin -->
<div class="container" id="adminSection" style="display:none;">
  <h1>Admin Panel</h1>
  <button class="btn-red" onclick="logoutAdmin()">Logout</button>

  <h2>Pending Complaints</h2>
  <div id="adminPanel"></div>

  <h2>Approved Complaints (<span id="approvedCount">0</span>)</h2>
  <div id="approvedPanel"></div>

  <h2>Registered Users (<span id="userCount">0</span>)</h2>
  <div id="adminUsers"></div>

  <h2>Moderators (Max 10)</h2>
  <input type="text" id="newMod" placeholder="Moderator Mobile...">
  <button class="btn-green" onclick="addModerator()">Add Moderator</button>
  <div id="moderatorsList"></div>
</div>

<script>
// Data
let users = JSON.parse(localStorage.getItem('users')||'[]');
let complaints = JSON.parse(localStorage.getItem('complaints')||'[]');
let moderators = JSON.parse(localStorage.getItem('moderators')||'[]'); 
let currentUser=null;

// Toggle
function showRegister(){document.getElementById('loginSection').style.display='none';document.getElementById('registerSection').style.display='block';}
function showLogin(){document.getElementById('registerSection').style.display='none';document.getElementById('loginSection').style.display='block';}
function showHome(){document.getElementById('loginSection').style.display='none';document.getElementById('registerSection').style.display='none';document.getElementById('homeSection').style.display='block'; renderPosts();}
function showAdminLogin(){const u=prompt("Admin Username"); const p=prompt("Admin Password"); if(u==='tarikul' && p==='2026583'){document.getElementById('homeSection').style.display='none';document.getElementById('adminSection').style.display='block'; renderAdmin(); renderApprovedAdmin(); renderUsers(); renderModerators();}else{alert("Invalid Admin")};}

// Register
function registerUser(){
  const name=document.getElementById('regName').value;
  const mobile=document.getElementById('regMobile').value;
  const pass=document.getElementById('regPass').value;
  const address=document.getElementById('regAddress').value;
  if(!name||!mobile||!pass||!address){alert("‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®");return;}
  if(users.find(u=>u.mobile===mobile)){alert("‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá‡¶á ‡¶Ü‡¶õ‡ßá");return;}
  users.push({name,mobile,pass,address});
  localStorage.setItem('users',JSON.stringify(users));
  alert("Registration Success!"); loginUser(mobile,pass);
}

// Login
function loginUser(mobileInput,passInput){
  const mobile=mobileInput||document.getElementById('loginMobile').value;
  const pass=passInput||document.getElementById('loginPass').value;
  const user = users.find(u=>u.mobile===mobile && u.pass===pass);
  if(user){currentUser=user; alert("Login Success!"); showHome();}
  else alert("Invalid Credentials");
}

// Submit Complaint
function submitComplaint(){
  if(!currentUser){alert("Login First");return;}
  const name=document.getElementById('cName').value;
  const mobile=document.getElementById('cMobile').value;
  const address=document.getElementById('cAddress').value;
  const fraud=document.getElementById('cFraud').value;
  const amount=document.getElementById('cAmount').value;
  const desc=document.getElementById('cDesc').value;
  const fb=document.getElementById('cFacebook').value;
  const wa=document.getElementById('cWhatsApp').value;
  const files=document.getElementById('cImages').files;
  if(!name||!mobile||!fraud||!amount||!desc||!fb||!wa){alert("‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®"); return;}

  const images=[];
  for(let i=0;i<files.length && i<3;i++){images.push(URL.createObjectURL(files[i]));}

  const id=complaints.length+1;
  complaints.push({id,name,mobile,address,fraud_type:fraud,amount,description:desc,facebook:fb,whatsapp:wa,images,status:'pending',likes:0,dislikes:0,comments:[],owner:currentUser.mobile});
  localStorage.setItem('complaints',JSON.stringify(complaints));
  alert("Complaint Submitted! Waiting Admin Approval");
}

// Render Posts
function renderPosts(){
  const postsDiv=document.getElementById('posts'); postsDiv.innerHTML="";
  complaints.filter(c=>c.status=='approved').forEach(c=>{
    const div=document.createElement('div'); div.className='postCard';
    let deleteBtn='';
    if(currentUser && (currentUser.mobile==c.owner || moderators.includes(currentUser.mobile))){deleteBtn=`<button class="btn-red" onclick="deletePost(${c.id})">Delete Post</button>`;}
    let waField = (currentUser && (currentUser.mobile=='tarikul' || moderators.includes(currentUser.mobile))) ? `<br>WhatsApp: ${c.whatsapp}` : '';
    div.innerHTML=`<img src="https://i.imgur.com/4kK8LPe.png" class="postLogo">
      <b>${c.name}</b> (${c.mobile})<br>
      Address: ${c.address}<br>
      Fraud: ${c.fraud_type}<br>
      Amount: ${c.amount}<br>
      Description: ${c.description}<br>
      Facebook: ${c.facebook}${waField}<br>
      <div class="postImages">${c.images.map(i=>`<img src="${i}">`).join('')}</div>
      <div class="actions">
        <button onclick="c.dislikes++;renderPosts()">Dislike</button>
        <button onclick="c.likes++;renderPosts()">Like</button>
        üëç${c.likes} | üëé${c.dislikes}
        ${deleteBtn}
      </div>`;
    postsDiv.appendChild(div);
  });
}

// Delete Post
function deletePost(id){
  const post=complaints.find(c=>c.id==id);
  if(currentUser && (currentUser.mobile==post.owner || moderators.includes(currentUser.mobile) || currentUser.mobile=='tarikul')){complaints=complaints.filter(c=>c.id!=id); localStorage.setItem('complaints',JSON.stringify(complaints)); renderPosts(); renderApprovedAdmin();}
  else{alert("‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶á ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶® ‡¶®‡¶æ");}
}

// Admin Panel
function renderAdmin(){
  const panel=document.getElementById('adminPanel'); panel.innerHTML="";
  complaints.filter(c=>c.status=='pending').forEach(c=>{
    const div=document.createElement('div'); div.className='postCard';
    div.innerHTML=`<b>${c.name}</b> (${c.mobile})<br>
      Address: ${c.address}<br>
      Fraud: ${c.fraud_type}<br>
      Amount: ${c.amount}<br>
      Description: ${c.description}<br>
      Facebook: ${c.facebook}<br>
      WhatsApp: ${c.whatsapp}<br>
      <div class="postImages">${c.images.map(i=>`<img src="${i}">`).join('')}</div>
      <button class="btn-green" onclick="approveComplaint(${c.id})">Approve</button>
      <button class="btn-red" onclick="rejectComplaint(${c.id})">Reject</button>`;
    panel.appendChild(div);
  });
}

// Approved Admin Panel
function renderApprovedAdmin(){
  const approved=document.getElementById('approvedPanel'); approved.innerHTML="";
  const approvedPosts = complaints.filter(c=>c.status=='approved');
  document.getElementById('approvedCount').innerText = approvedPosts.length;
  approvedPosts.forEach(c=>{
    const div=document.createElement('div'); div.className='postCard';
    div.innerHTML=`<b>${c.name}</b> (${c.mobile})<br>
      Address: ${c.address}<br>
      Fraud: ${c.fraud_type}<br>
      Amount: ${c.amount}<br>
      Description: ${c.description}<br>
      Facebook: ${c.facebook}<br>
      WhatsApp: ${c.whatsapp}<br>
      <div class="postImages">${c.images.map(i=>`<img src="${i}">`).join('')}</div>
      <button class="btn-red" onclick="deleteApproved(${c.id})">Delete</button>`;
    approved.appendChild(div);
  });
}

// Approve / Reject
function approveComplaint(id){complaints.find(c=>c.id==id).status='approved'; localStorage.setItem('complaints',JSON.stringify(complaints)); renderAdmin(); renderPosts(); renderApprovedAdmin();}
function rejectComplaint(id){complaints=complaints.filter(c=>c.id!=id); localStorage.setItem('complaints',JSON.stringify(complaints)); renderAdmin();}

// Delete approved from Admin
function deleteApproved(id){complaints=complaints.filter(c=>c.id!=id); localStorage.setItem('complaints',JSON.stringify(complaints)); renderApprovedAdmin(); renderPosts();}

// Users
function renderUsers(){
  const uDiv=document.getElementById('adminUsers'); uDiv.innerHTML="";
  document.getElementById('userCount').innerText = users.length;
  users.forEach(u=>{
    const div=document.createElement('div'); div.className='postCard';
    div.innerHTML=`<b>${u.name}</b> (${u.mobile})<br>Address: ${u.address}<br>
      <button class="btn-green" onclick="resetUserPass('${u.mobile}')">Reset Password</button>`;
    uDiv.appendChild(div);
  });
}

function resetUserPass(mobile){const newPass=prompt("New Password for "+mobile); if(!newPass)return; const user=users.find(u=>u.mobile==mobile); if(user){user.pass=newPass; localStorage.setItem('users',JSON.stringify(users)); alert("Password Reset!");}}

// Moderators
function addModerator(){const mod=document.getElementById('newMod').value; if(!mod){alert("Moderator Mobile ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®"); return;} if(moderators.includes(mod)){alert("Moderator Already Exists"); return;} if(moderators.length>=10){alert("Max 10 moderators"); return;} moderators.push(mod); localStorage.setItem('moderators',JSON.stringify(moderators)); renderModerators();}
function renderModerators(){const div=document.getElementById('moderatorsList'); div.innerHTML=""; moderators.forEach(m=>{div.innerHTML+=`<div class="postCard">${m} <button class="btn-red" onclick="removeModerator('${m}')">Remove</button></div>`});}
function removeModerator(mod){moderators=moderators.filter(m=>m!=mod); localStorage.setItem('moderators',JSON.stringify(moderators)); renderModerators();}

// Logout Admin
function logoutAdmin(){alert("Admin Logged Out"); document.getElementById('adminSection').style.display='none';showHome();}

// Search
function searchComplaints(){
  const num=document.getElementById('searchMobile').value;
  const results=document.getElementById('searchResults'); results.innerHTML="";
  complaints.filter(c=>c.mobile==num && c.status=='approved').forEach(c=>{
    let waField = (currentUser && (currentUser.mobile=='tarikul' || moderators.includes(currentUser.mobile))) ? `<br>WhatsApp: ${c.whatsapp}` : '';
    results.innerHTML+=`<div class="postCard"><b>${c.name}</b> (${c.mobile})<br>
      Address: ${c.address}<br>Fraud: ${c.fraud_type}<br>Amount: ${c.amount}<br>Description: ${c.description}<br>Facebook: ${c.facebook}${waField}
      <div class="postImages">${c.images.map(i=>`<img src="${i}">`).join('')}</div>
    </div>`;
  });
  if(results.innerHTML=="") results.innerHTML="‡¶ï‡ßã‡¶®‡¶ì ‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø";
}
</script>
</body>
  </html>
